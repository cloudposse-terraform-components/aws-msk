name: "aws-msk"
# Canonical GitHub repo
github_repo: "cloudposse-terraform-components/aws-msk"
# Short description of this project
description: |-
  This component is responsible for provisioning [Amazon Managed Streaming](https://aws.amazon.com/msk/) clusters for
  [Apache Kafka](https://aws.amazon.com/msk/what-is-kafka/).
usage: |-
  **Stack Level**: Regional

  Here's an example snippet for how to use this component.

  ```yaml
  components:
    terraform:
      msk:
        metadata:
          component: "msk"
        vars:
          enabled: true
          name: "msk"
          vpc_component_name: "vpc"
          dns_delegated_component_name: "dns-delegated"
          dns_delegated_environment_name: "gbl"
          # https://docs.aws.amazon.com/msk/latest/developerguide/supported-kafka-versions.html
          kafka_version: "3.4.0"
          public_access_enabled: false
          # https://aws.amazon.com/msk/pricing/
          broker_instance_type: "kafka.m5.large"
          # Number of brokers per AZ
          broker_per_zone: 1
          #  `broker_dns_records_count` specifies how many DNS records to create for the broker endpoints in the DNS zone provided in the `zone_id` variable.
          #  This corresponds to the total number of broker endpoints created by the module.
          #  Calculate this number by multiplying the `broker_per_zone` variable by the subnet count.
          broker_dns_records_count: 3
          broker_volume_size: 500
          client_broker: "TLS_PLAINTEXT"
          encryption_in_cluster: true
          encryption_at_rest_kms_key_arn: ""
          enhanced_monitoring: "DEFAULT"
          certificate_authority_arns: []

          # Authentication methods
          client_allow_unauthenticated: true
          client_sasl_scram_enabled: false
          client_sasl_scram_secret_association_enabled: false
          client_sasl_scram_secret_association_arns: []
          client_sasl_iam_enabled: false
          client_tls_auth_enabled: false

          jmx_exporter_enabled: false
          node_exporter_enabled: false
          cloudwatch_logs_enabled: false
          firehose_logs_enabled: false
          firehose_delivery_stream: ""
          s3_logs_enabled: false
          s3_logs_bucket: ""
          s3_logs_prefix: ""
          properties: {}
          autoscaling_enabled: true
          storage_autoscaling_target_value: 60
          storage_autoscaling_max_capacity: null
          storage_autoscaling_disable_scale_in: false
          create_security_group: true
          security_group_rule_description: "Allow inbound %s traffic"
          # A list of IDs of Security Groups to allow access to the cluster security group
          allowed_security_group_ids: []
          # A list of IPv4 CIDRs to allow access to the cluster security group
          allowed_cidr_blocks: []
  ```

  <!-- prettier-ignore-start -->
  <!-- prettier-ignore-end -->
references:
  - name: "https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/msk_cluster"
    description: ""
    url: "https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/msk_cluster"
  - name: "https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/msk_serverless_cluster"
    description: ""
    url: "https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/msk_serverless_cluster"
  - name: "https://aws.amazon.com/blogs/big-data/securing-apache-kafka-is-easy-and-familiar-with-iam-access-control-for-amazon-msk/"
    description: ""
    url: "https://aws.amazon.com/blogs/big-data/securing-apache-kafka-is-easy-and-familiar-with-iam-access-control-for-amazon-msk/"
  - name: "https://docs.aws.amazon.com/msk/latest/developerguide/security-iam.html"
    description: ""
    url: "https://docs.aws.amazon.com/msk/latest/developerguide/security-iam.html"
  - name: "https://docs.aws.amazon.com/msk/latest/developerguide/iam-access-control.html"
    description: ""
    url: "https://docs.aws.amazon.com/msk/latest/developerguide/iam-access-control.html"
  - name: "https://docs.aws.amazon.com/msk/latest/developerguide/kafka_apis_iam.html"
    description: ""
    url: "https://docs.aws.amazon.com/msk/latest/developerguide/kafka_apis_iam.html"
  - name: "https://github.com/aws/aws-msk-iam-auth"
    description: ""
    url: "https://github.com/aws/aws-msk-iam-auth"
  - name: "https://www.cloudthat.com/resources/blog/a-guide-to-create-aws-msk-cluster-with-iam-based-authentication"
    description: ""
    url: "https://www.cloudthat.com/resources/blog/a-guide-to-create-aws-msk-cluster-with-iam-based-authentication"
  - name: "https://blog.devops.dev/how-to-use-iam-auth-with-aws-msk-a-step-by-step-guide-2023-eb8291781fcb"
    description: ""
    url: "https://blog.devops.dev/how-to-use-iam-auth-with-aws-msk-a-step-by-step-guide-2023-eb8291781fcb"
  - name: "https://www.kai-waehner.de/blog/2022/08/30/when-not-to-choose-amazon-msk-serverless-for-apache-kafka/"
    description: ""
    url: "https://www.kai-waehner.de/blog/2022/08/30/when-not-to-choose-amazon-msk-serverless-for-apache-kafka/"
  - name: "https://stackoverflow.com/questions/72508438/connect-python-to-msk-with-iam-role-based-authentication"
    description: ""
    url: "https://stackoverflow.com/questions/72508438/connect-python-to-msk-with-iam-role-based-authentication"
  - name: "https://github.com/aws/aws-msk-iam-auth/issues/10"
    description: ""
    url: "https://github.com/aws/aws-msk-iam-auth/issues/10"
  - name: "https://aws.amazon.com/msk/faqs/"
    description: ""
    url: "https://aws.amazon.com/msk/faqs/"
  - name: "https://aws.amazon.com/blogs/big-data/secure-connectivity-patterns-to-access-amazon-msk-across-aws-regions/"
    description: ""
    url: "https://aws.amazon.com/blogs/big-data/secure-connectivity-patterns-to-access-amazon-msk-across-aws-regions/"
  - name: "https://docs.aws.amazon.com/msk/latest/developerguide/client-access.html"
    description: ""
    url: "https://docs.aws.amazon.com/msk/latest/developerguide/client-access.html"
  - name: "https://repost.aws/knowledge-center/msk-broker-custom-ports"
    description: ""
    url: "https://repost.aws/knowledge-center/msk-broker-custom-ports"
tags:
  - component/msk
  - layer/unassigned
  - provider/aws
# Categories of this project
categories:
  - component/msk
  - layer/unassigned
  - provider/aws
# License of this project
license: "APACHE2"
# Badges to display
badges:
  - name: Latest Release
    image: https://img.shields.io/github/release/cloudposse-terraform-components/aws-msk.svg?style=for-the-badge
    url: https://github.com/cloudposse-terraform-components/aws-msk/releases/latest
  - name: Slack Community
    image: https://slack.cloudposse.com/for-the-badge.svg
    url: https://slack.cloudposse.com
related:
  - name: "Cloud Posse Terraform Modules"
    description: Our collection of reusable Terraform modules used by our reference architectures.
    url: "https://docs.cloudposse.com/modules/"
  - name: "Atmos"
    description: "Atmos is like docker-compose but for your infrastructure"
    url: "https://atmos.tools"
contributors: [] # If included generates contribs
